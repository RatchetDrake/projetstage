

<script> 
// Tableau avec le texte complet de chaque histoire
const histoires = [
    // Histoire 1
    `
    Dans un monde en proie aux ténèbres et à la magie, les Chroniques de l'Épée Perdue débutent dans la Cité d'Émeraude, une métropole étincelante où se croisent des marchands rusés, des mages érudits, et des guerriers légendaires. Au cœur de cette cité, l'histoire prend vie avec une rumeur grandissante : l'Épée Perdue, une relique d'une puissance incommensurable, a été dérobée du musée royal. Cette épée, autrefois portée par un héros légendaire, est capable de décider du sort du monde, qu'il soit baigné dans la lumière ou englouti dans les ténèbres.
    Vous êtes des âmes hétéroclites, chacune portant son propre fardeau, et vous avez été attirées par l'appel de cette quête épique. Vous vous trouvez au marché central de la Cité d'Émeraude lorsque vous êtes abordées par un étranger mystérieux, un homme d'âge mûr portant une longue cape sombre. Il se présente comme Alaric, un érudit renommé en quête de héros pour retrouver l'Épée Perdue.
    Alaric prétend détenir des informations cruciales sur le vol de l'épée, des informations qu'il ne peut partager qu'avec vous. La confiance règne en maître dans ses yeux, et l'urgence de la situation est palpable. Il vous invite à le suivre vers une ruelle obscure, où il dévoile une énigme liée à des runes anciennes trouvées près de l'autel d'un dieu oublié...`,
    // Histoire 2
    `
    L'Ascension des Royaumes Obscurs
    

    Dans un futur lointain, où l'humanité avait conquis les étoiles, un vaisseau spatial nommé l'Étoile d'Argent naviguait dans les profondeurs inexplorées de la galaxie. À son bord, l'équipage hétéroclite composé d'humains, d'aliens et de cyborgs travaillait en harmonie pour percer les mystères de l'univers.

Le capitaine, Ada Thorn, était une brillante scientifique connue pour sa détermination et sa curiosité insatiable. Elle avait passé sa vie à étudier les phénomènes cosmiques les plus énigmatiques, et cette mission représentait son plus grand défi. Ils avaient reçu un signal mystérieux provenant d'une région inexplorée de la galaxie, un signal qui semblait défier les lois connues de la physique.

Alors que l'Étoile d'Argent s'approchait de la source du signal, l'équipage ressentait une tension croissante. Soudain, une déchirure dans l'espace-temps s'ouvrit devant eux, révélant un passage vers une dimension inconnue. Ada décida de prendre le risque et fit entrer le vaisseau dans le passage.

De l'autre côté, l'équipage se retrouva dans un monde étrange et fantastique, où les lois de la réalité semblaient ne plus s'appliquer. Des créatures lumineuses flottaient dans l'air, des arbres aux feuilles argentées s'étendaient à perte de vue, et un éclat mystique remplissait l'atmosphère.

Mais alors qu'ils commençaient à explorer ce nouvel univers, l'Étoile d'Argent fut soudainement attaquée par une force mystérieuse. Les systèmes du vaisseau commencèrent à dysfonctionner, et ils réalisèrent que ce monde n'était pas aussi pacifique qu'il en avait l'air. Ada et son équipage devaient maintenant percer les secrets de cette dimension pour survivre et peut-être même trouver des réponses au mystère du signal qui les avait conduits ici.`,
    // Histoire 3
    `
    Dans la paisible ville de Dusty Gulch, perdue au cœur du désert impitoyable de l'Ouest sauvage, régnait une tension palpable. Les éleveurs de bétail et les mineurs se disputaient les maigres ressources de la région, tandis que les hors-la-loi rôdaient dans l'ombre.

Notre histoire commence avec un homme solitaire nommé Wyatt McCullough. Il était autrefois un redoutable hors-la-loi, mais il avait choisi de ranger ses revolvers et de trouver la rédemption en protégeant les innocents de Dusty Gulch. Wyatt était devenu le shérif de la ville, un homme dur à cuire au cœur tendre.

Alors que la tension montait entre les éleveurs et les mineurs, Wyatt savait que la situation était sur le point d'exploser. Un soir, lorsqu'une fusillade éclata dans le saloon, il prit les choses en main. Il désarma les combattants acharnés et leur fit comprendre que la violence ne résoudrait rien. Il était temps de trouver un compromis pour le bien de tous.

Wyatt organisa une réunion secrète entre les leaders des deux camps, dans un vieux repaire de hors-la-loi abandonné. Là, au clair de lune, ils discutèrent des problèmes qui affligeaient Dusty Gulch et réalisèrent qu'ils devaient unir leurs forces pour prospérer.

Avec l'aide de Wyatt, les éleveurs et les mineurs conclurent un accord qui profiterait à tous. Ils partagèrent les ressources et travaillèrent ensemble pour faire de Dusty Gulch une ville prospère. Wyatt McCullough avait réussi à rétablir la paix dans l'Ouest sauvage, prouvant que même les hommes les plus endurcis pouvaient trouver la rédemption.`,
    // Histoire 4
    `
    Dans un monde où la magie régnait en maître, une jeune sorcière nommée Elara découvrit un grimoire ancien renfermant des sorts interdits. Alors qu'elle était plongée dans l'étude de ces magies sombres, elle libéra accidentellement une entité maléfique qui menaçait de plonger son royaume dans les ténèbres éternelles.

Déterminée à réparer son erreur, Elara partit en quête d'artefacts magiques et de connaissances anciennes pour contrer la menace grandissante. Elle se retrouva bientôt accompagnée de compagnons improbables, un fier chevalier maudit nommé Sir Cedric et un malicieux lutin voleur du nom de Puck.

Ensemble, ils entreprirent un voyage périlleux à travers des terres enchantées, affrontant des créatures mythiques, résolvant d'énigmatiques énigmes, et maîtrisant des pouvoirs magiques interdits. Leur quête les conduisit à travers des forêts hantées, des montagnes enchantées et des cités perdues.

Au fil de leur périple, Elara découvrit que l'entité maléfique était liée à son propre passé mystérieux, et elle devait affronter son propre destin pour sauver son royaume. Avec l'aide de ses compagnons, elle apprit à maîtriser non seulement la magie interdite, mais aussi les pouvoirs de l'amitié et du courage.

Finalement, dans une confrontation épique, Elara, Sir Cedric, et Puck réussirent à sceller à nouveau l'entité maléfique dans le grimoire dont elle s'était échappée. Leur monde fut sauvé, mais à un prix élevé. Les trois compagnons se séparèrent, sachant que leurs destins les appelaient vers de nouvelles aventures.`,
    // Histoire 5
    `
    Dans un monde dévasté par une catastrophe nucléaire, la civilisation telle que nous la connaissions avait disparu. Les survivants luttaient chaque jour pour leur existence dans un paysage désolé et hostile.

Notre histoire suit un groupe de survivants hétéroclites dirigé par un homme nommé Kane. Kane avait survécu à l'explosion initiale en se réfugiant dans un abri souterrain, mais il savait que le véritable défi était de survivre dans ce nouveau monde.

Le groupe de Kane parcourait les terres brûlées à la recherche de ressources rares, de nourriture et d'eau potable. Ils devaient également faire face à des bandes de pillards impitoyables et à des créatures mutantes qui avaient émergé de l'ombre de la catastrophe.

Mais Kane avait un objectif plus grand en tête. Il avait entendu parler d'un lieu mythique appelé "L'Arche", un endroit supposé être un havre de paix dans ce monde déchiré par le chaos. Il croyait que s'ils pouvaient atteindre L'Arche, ils trouveraient un espoir de reconstruction pour l'humanité.

Le voyage était semé d'obstacles, mais le groupe d'Errants de l'Apocalypse était résolu à affronter tous les défis pour atteindre L'Arche. Ils rencontrèrent des alliés inattendus en cours de route et découvrirent la force de la camaraderie dans un monde où la survie était tout.`,
    // Histoire 6
    `
    Dans une métropole corrompue par la criminalité et la désolation, un groupe de super-héros aux intentions douteuses se frayait un chemin à travers les rues sombres. Ils n'étaient pas des justiciers, mais plutôt des opportunistes, utilisant leurs pouvoirs pour servir leurs propres intérêts.

Le chef de ce groupe était un homme appelé Victor Noir, doté d'une force surhumaine et d'une intelligence rusée. Il avait réuni des individus aux pouvoirs extraordinaires, mais motivés par l'appât du gain et le pouvoir personnel plutôt que par l'altruisme.

Parmi eux, il y avait Iris Obscura, une femme capable de manipuler les ombres pour commettre des vols spectaculaires, et Pyroclast, un pyromane incontrôlable dont les flammes dévastaient tout sur leur passage. Ils étaient les Antihéros Incontrôlables, un cauchemar pour les forces de l'ordre et une menace pour la ville.

Cependant, même parmi les super-méchants, des tensions et des rivalités surgissaient. Victor Noir, en quête de pouvoir absolu, envisageait de trahir ses propres complices pour prendre le contrôle total de la ville. Les autres membres du groupe se méfiaient de lui et cherchaient également à obtenir le dessus.

Alors que la métropole sombrait de plus en plus dans le chaos, les Antihéros Incontrôlables s'engageaient dans une guerre interne, se trahissant les uns les autres pour atteindre leurs objectifs égoïstes. La ville était devenue un champ de bataille où personne n'était à l'abri.

Cependant, au milieu de cette tourmente, il y avait un espoir de changement. Une figure mystérieuse, connue sous le nom de "L'Éclipse", émergea des ombres pour défier les Antihéros Incontrôlables. Qui était cet individu masqué, et quelles étaient ses motivations ? Cela, personne ne le savait.`,
];
// Fonction pour afficher le texte de l'histoire et son titre
function afficherTexteHistoire(numero) {
    const histoireTexte = document.getElementById('histoire-texte');
    const titreHistoire = document.querySelector('.metadata .chroniques-epée-perdue');
    let texteHistoire;
    let titre;

    switch (numero) {
        case 1:
            titre = "Les Chroniques de l'Épée Perdue";
            texteHistoire = histoires[0];
            break;
        case 2:
            titre = "L'Odyssée de l'Étoile d'Argent";
            texteHistoire = histoires[1];
            break;
        case 3:
            titre = "Le Shérif de Dusty Gulch";
            texteHistoire = histoires[2];
            break;
        case 4:
            titre = "La Quête d'Elara";
            texteHistoire = histoires[3];
            break;
        case 5:
            titre = "Les Errants de l'Apocalypse";
            texteHistoire = histoires[4];
            break;
        case 6:
            titre = "Les Antihéros Incontrôlables";
            texteHistoire = histoires[5];
            break;
        default:
            titre = "Histoire non trouvée";
            texteHistoire = "Histoire non trouvée";
            break;
    }

    histoireTexte.querySelector('h2').textContent = titre;
    histoireTexte.querySelector('p').textContent = texteHistoire;
}


// Ajoutez un gestionnaire d'événements aux cellules d'histoire
for (let i = 1; i <= 6; i++) {
    const histoireCell = document.getElementById('histoire-' + i);
    histoireCell.addEventListener('click', function() {
        afficherTexteHistoire(i);
    });
}

// Gestionnaire pour la soumission du formulaire de proposition
document.getElementById('proposer-suite').addEventListener('submit', function(e) {
    e.preventDefault(); // Empêcher la soumission par défaut du formulaire
    const titre = document.getElementById('titre-histoire').value;
    const ordre = document.getElementById('ordre').value;
    const textePropose = document.getElementById('suite-histoire').value;

    // Envoyer la proposition à la base de données via une requête AJAX
    const xhr = new XMLHttpRequest();
    xhr.open('POST', '../Controle/creationhistoire_ctrl.php'); // Assurez-vous que le chemin est correct
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
            // La proposition a été enregistrée avec succès
            alert('Proposition enregistrée avec succès !');
        }
    };
    
    // Envoyer les données au serveur PHP
    xhr.send('titre=' + encodeURIComponent(titre) + '&ordre=' + encodeURIComponent(ordre) + '&proposition=' + encodeURIComponent(textePropose));
    
    // Effacer les champs de texte du formulaire
    document.getElementById('titre-histoire').value = '';
    document.getElementById('ordre').value = '';
    document.getElementById('suite-histoire').value = '';
});

// Gestionnaire pour la soumission du formulaire de modification de titre
document.getElementById('modifier-titre').addEventListener('submit', function(e) {
    e.preventDefault(); // Empêcher la soumission par défaut du formulaire
    const nouveauTitre = document.getElementById('nouveau-titre').value;
    const histoireActuelle = document.querySelector('.metadata .chroniques-epée-perdue').textContent;

    // Envoyer la demande de modification de titre à la base de données via une requête AJAX
    const xhr = new XMLHttpRequest();
    xhr.open('POST', '../Controle/creationhistoire_ctrl.php'); // Assurez-vous que le chemin est correct
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
            // Le titre a été modifié avec succès
            alert('Titre modifié avec succès !');
            
            // Mettre à jour le titre affiché
            document.querySelector('.metadata .chroniques-epée-perdue').textContent = nouveauTitre;
        }
    };
    
    // Envoyer les données au serveur PHP
    xhr.send('nouveau_titre=' + encodeURIComponent(nouveauTitre) + '&histoire_actuelle=' + encodeURIComponent(histoireActuelle));
    
    // Effacer le champ de texte du formulaire
    document.getElementById('nouveau-titre').value = '';
});

    // Gestionnaire pour la soumission du formulaire
    document.getElementById('proposer-suite').addEventListener('submit', function(e) {
        const ordreSelect = document.getElementById('ordre');
        
        // Vérifier si l'option par défaut a été sélectionnée
        if (ordreSelect.value === "") {
            alert("Veuillez choisir une histoire avant de soumettre le formulaire.");
            e.preventDefault(); // Empêcher la soumission du formulaire
        }
    });


</script>